# see: http://gis.hsr.ch/wiki/PostGIS_-_Tipps_und_Tricks#Shapefiles_in_PostGIS_importieren_.28shp2pgsql.29

# create database
createdb -O [user] -T template_postgis -U [user] texas

# convert shp to sql
## -d drop database
## -I create GiST index
## -D use dump format
## -s srid
## -S simple geometries if possible
## -W encoding
## [-G for geography]
shp2pgsql -s 4326 -d -I -D -S -W ISO-8859-1 TIGER-2008/48_TEXAS/areawater_merge areawater > areawater.sql
shp2pgsql -s 4326 -d -I -D -S -W ISO-8859-1 TIGER-2008/48_TEXAS/edges_merge edges > edges.sql
shp2pgsql -s 4326 -d -I -D -S -W ISO-8859-1 GNIS-2009/gnis_names09 names > names.sql

# import datasets
psql -f areawater.sql texas
psql -f edges.sql texas
psql -f names.sql texas

# already done with -I, otherwise
# CREATE INDEX idx_areawater_the_geom ON areawater USING gist(the_geom);
# CREATE INDEX idx_edges_the_geom ON edges USING gist(the_geom);
# CREATE INDEX idx_names_the_geom ON names USING gist(the_geom);

# load subsets
python benchmark.py -d postgis -l | psql texas 
